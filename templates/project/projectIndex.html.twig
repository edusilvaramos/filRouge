{% extends 'base.html.twig' %}

{% block title %}Project Index
{% endblock %}

{% block body %}
	<div class="container mt-5 mb-5">
		<h1 class="text-center text-primary mb-4">Projects</h1>

{# {% set uniqueProjects = [] %}
{% for task in app.user.tasks %}
    {% if task.project and task.project not in uniqueProjects %}
        {% set uniqueProjects = uniqueProjects|merge([task.project]) %}
    {% endif %}
{% endfor %} #}

<div class="row g-4">
    {# {% for project in uniqueProjects %} #}
    {% for project in app.user.projects %}
        <div class="col-lg-5 col-md-6 col-sm-12">
            <div class="card shadow-sm h-100">
                <img src="{{ project.imageProject ? asset(project.imageProject) : asset('path/to/default-image.jpg') }}" 
                     alt="Project Image" 
                     class="card-img-top" 
                     style="height: 200px; object-fit: cover;">

                <div class="card-body">
                    <h5 class="card-title text-primary">{{ project.projectName }}</h5>
                    <p class="text-muted mb-2">
                        <strong>Date de debut:</strong>
                        {{ project.initDate ? project.initDate|date('d-m-Y') : 'N/A' }}<br>
                        <strong>Prevision de fin:</strong>
                        {{ project.finishDate ? project.finishDate|date('d-m-Y') : 'N/A' }}
                    </p>
                </div>
                <div class="card-footer text-center">
                    <a href="{{ path('app_project_show', {'id': project.id}) }}" class="btn btn-info btn-sm me-2">
                        <i class="bi bi-eye"></i>
                        Show
                    </a>
                    <a href="{{ path('app_project_edit', {'id': project.id}) }}" class="btn btn-warning btn-sm">
                        <i class="bi bi-pencil"></i>
                        Edit
                    </a>
                </div>
            </div>
        </div>
    {% else %}
        <div class="col-12">
            <p class="text-center text-danger fs-5">No projects found.</p>
        </div>
    {% endfor %}
</div>




		<div class="text-center mt-4">
			<a href="{{ path('app_project_new') }}" class="btn btn-success btn-lg" aria-label="Create New Project">
				<i class="bi bi-plus-circle"></i>
				Create New
			</a>
		</div>
	</div>
{% endblock %}
